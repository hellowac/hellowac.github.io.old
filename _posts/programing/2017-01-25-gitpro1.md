---
nav: blog
layout: post
title: "GitPro -- 基础"
author: "Pual"
tags:
  - Git
  - Learn
  - '版本控制'
category:
  - 'Programing Teach'
show: true
---

[{{ site.nav.home.name }}]({% link index.md %})/
[{{ site.nav.blog.name }}]({% link blog/index.md %})/
[{{ site.nav.blog.subnav.programing.name }}]({% link blog/programing/index.md %})/
{{ page.title }}

参考自 [git Pro]()

## Git 基础

初次与行Git前的配置
git config文件存储的三个位置:
1. /etc/gitconfig文件:包含系统上每一个用户以及它们仓库的通用配置.如果git config添加—system选项,从此文件读写配置变量.
2. ~/.gitconfig或～/.config/git/config文件:只针对当前用户,可以传递—global选项让Git读取此文件.
3. 当前使用仓库的Git目录中的config文件(就是.git/config):针对该仓库.
每一个级别覆盖上一级别的配置,所以.git/config的配置变量会覆盖/etc/gitconfig中的配置变量.

### 三个工作区域
* `Git 仓库`
* `工作目录`
* `暂存区域`

### 基本工作流程
1. 在工作目录中修改文件。
2. 暂存文件，将文件的快照放入暂存区域。
3. 提交更新，找到暂存区域的文件，将快照永久性存储到 Git 仓库目录.

### 配置三个位置
1. `/etc/gitconfig`文件:包含系统上每一个`用户`以及它们`仓库`的`通用配置`.如果git config添加 —system 选项,从此文件读写配置变量.
2. `~/.gitconfig` 或 `～/.config/git/config` 文件:只针对当前用户,可以传递 —global 选项 让Git读取此文件.
3. 当前使用仓库的Git目录中的`config`文件(就是`.git/config`):针对该仓库.
4. 每一个级别覆盖上一级别的配置,所以`.git/config`的配置变量会覆盖`/etc/gitconfig`中的配置变量.

### 用户信息:
* 当安装完Git应该做的第一件事就是设置你的`用户名称`与`邮件地址`.
* 因为每一个Git提交都会使用这些信息.
* 并且会写入到每一次提交中,不可更改:

```python
git config --global user.name "John wang"
git config --global user.email Johnwang@example.com
```

* 如果使用了 `—global` 选项,那么该命令只需要运行一次,因为之后无论你在该系统上做任何事情,Git 都会使用那些信息.

### 文本编辑器:
如果未配置,Git会使用操作系统默认的文本编辑器.

```python
git config --global core.editor emacs
```

### 检查配置信息:
格式:git config --list

```python
git config --list 

credential.helper=osxkeychain
core.excludesfile=/Users/john/.gitignore_global
difftool.sourcetree.cmd=opendiff "$LOCAL" "$REMOTE"
difftool.sourcetree.path=
mergetool.sourcetree.cmd=/Applications/SourceTree.app/Contents/Resources/opendiff-w.sh "$LOCAL" "$REMOTE" -ancestor "$BASE" -merge "$MERGED"
mergetool.sourcetree.trustexitcode=true
commit.template=/Users/john/.stCommitMsg
alias.st=status
core.repositoryformatversion=0
core.filemode=true
core.bare=false
core.logallrefupdates=true
core.ignorecase=true
core.precomposeunicode=true
remote.origin.url=git@github.com:john/john.github.io.git
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
branch.master.remote=origin
branch.master.merge=refs/heads/master
user.name=john
user.email=johnwang@gmail.com
```

or git config <key> 来检查Git的某一项配置:

```python
git config user.name

johnwang
```
### 获取帮助:
三种方法:

```python
git help <verb>
git <verb> --help
man git-<verb>
```
或者尝试在 Freenode IRC 服务器（ irc.freenode.net ）的 #git 或 #github 频道寻求帮助

### 获取Git仓库:
* 在现有项目或目录下倒入所有文件到Git中；

```python
git init

git add *.c
git add LICENSE
git commit -m "initial project version"
```
* 从一个服务器克隆一个现有Git仓库。

```python
git clone https://github.com/libgit2/libgit2

git clone https://github.com/libgit2/libgit2 mylibgit
```
执行git clone 命令的时候,默认配置下远程仓库中的每一个文件的每一个版本都将被拉去下来。

创建目录—>所有数据放入.git文件夹—>读取最新文件的拷贝—>放入新建的文件夹.

### Git 文件状态:
每一个文件都不外乎两种状态:已跟踪或未跟踪 
![git status img]({% link assets/programingimg/git_status.png %})

### 检查文件状态

```python
git status

On branch master
Your branch is up-to-date with 'origin/master'.
```

### 跟踪新文件
```python
git add <filename/folder>
```
格式:git add (files) 
如果参数是目录,递归的跟踪改目录下所有文件.

### 暂存已修改文件

```python
git add programing
git status

On branch master
Your branch is up-to-date with 'origin/master'.
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

    new file:   programing/2017-01-25-gitpro1.md
```
add 命令:
1. 开始跟踪新文件
2. 把已跟踪文件放到暂存区
3. 合并时把有冲突文件标记为已解决状态

理解add为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更合适

__注:__ 暂存区和修改区都可能出现同一个文件,提交时会提交暂存区的文件.而不是工作区的文件.

### 状态简览
```python
git status -s

AM programing/2017-01-25-gitpro1.md
A  ../assets/programingimg/git_status.png
```

* __格式:__ git status [-s][--short]
* __??标记:__ 未跟踪文件
* __A标记:__ 新添加到暂存区文件
* __M标记:__ 修改过的文件
* __MM标记:__ 左边M表示修改并放入暂存区了,右边M表示修改了但未放入暂存区.

### 忽略文件
残酷目录添加 .gitignore 文件.
```python
cat .gitignore

*.oa
*~
```
.gitignore文件格式规范:
- 所有空行或者以#开头的行都会被git忽略
- 可以使用标准的glob模式匹配
- 匹配模式可以以(/)开头防止递归
- 匹配模式可以以(/)结尾指定目录
- 要忽略指定模式以外的文件或目录,可以在模式前加上感叹号(!)取反。

例如:

```
“# no .a files
*.a”

“# but do track lib.a, even though you're ignoring .a files above
!lib.a

# only ignore the TODO file in the current directory, not subdir/TODO
/TODO

# ignore all files in the build/ directory
build/

# ignore doc/notes.txt, but not doc/server/arch.txt
doc/*.txt

# ignore all .pdf files in the doc/ directory
doc/**/*.pdf”

```

### 查看修改

比较工作目录和暂存区域快照之间差异:
```python
git diff

diff --git a/_posts/programing/2017-01-25-gitpro1.md b/_posts/programing/2017-01-25-gitpro1.md
index 051b432..321fefe 100644
--- a/_posts/programing/2017-01-25-gitpro1.md
+++ b/_posts/programing/2017-01-25-gitpro1.md
@@ -152,24 +152,76 @@ git add <filename/folder>
 ### 暂存已修改文件

```

```python
git diff --staged

diff --git a/_posts/programing/2017-01-25-gitpro1.md b/_posts/programing/2017-01-25-gitpro1.md
new file mode 100644
index 0000000..051b432
--- /dev/null
+++ b/_posts/programing/2017-01-25-gitpro1.md
@@ -0,0 +1,178 @@
+---
```
or `git diff —cached `
查看已暂存起来的变化(—staged 和 —cached 是同义词)

### 提交更新

```python
git commit 
```
会启动文本编辑器以便输入本次本次提交的说明.(默认$EDITOR所指定的软件)

```python
git commit -m "commit message"
```
在commit命令后添加`-m`选项,将提交信息与命令放在同一行.


